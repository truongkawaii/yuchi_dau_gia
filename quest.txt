
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ ƒê·∫•u Gi√° T·ª´ Thi·ªán Noel 2025</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Lights Decoration -->
    <div class="lights">
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
        <div class="light"></div>
    </div>

    <!-- Header -->
    <header>
        <h1>üéÑ ƒê·∫§U GI√Å T·ª™ THI·ªÜN NOEL 2025 üéÖ</h1>
        <p>Chia s·∫ª y√™u th∆∞∆°ng - Lan t·ªèa h·∫°nh ph√∫c</p>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Active Product Section -->
        <div class="active-section">
            <div class="active-product">
                <div class="active-product-image">
                    <div class="slideshow-container">
                        <img id="activeImage" src="product1.jpg" alt="S·∫£n ph·∫©m ƒëang ƒë·∫•u gi√°">
                        <div class="slideshow-dots" id="activeDots"></div>
                        <button class="slideshow-prev" id="activePrev">‚ùÆ</button>
                        <button class="slideshow-next" id="activeNext">‚ùØ</button>
                    </div>
                </div>
                <div class="active-product-info">
                    <h2 id="activeName">ƒêang t·∫£i...</h2>
                    <p id="activeDescription" style="color: #e0e0e0;"></p>
                    <div class="price-info">
                        <p><strong>üí∞ Gi√° kh·ªüi ƒëi·ªÉm:</strong> <span class="price" id="activeStartPrice">0 VNƒê</span></p>
                        <p><strong>üè∑Ô∏è Gi√° mua ban ƒë·∫ßu:</strong> <span class="price" id="activeOriginalPrice">0 VNƒê</span></p>
                    </div>
                    <div class="countdown" id="countdown">
                        ‚è∞ Th·ªùi gian c√≤n l·∫°i: 00:00
                    </div>
                </div>
            </div>
        </div>

        <!-- Product List Section -->
        <div class="product-list-section">
            <h2>üìã DANH S√ÅCH S·∫¢N PH·∫®M ƒê·∫§U GI√Å</h2>
            <div class="product-grid" id="productGrid">
                <!-- Products will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
//style.css
*{margin:0;padding:0;box-sizing:border-box;}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#1a472a 0%,#2d5a3d 50%,#0f2818 100%);color:#fff;overflow-x:hidden;position:relative;min-height:100vh;}.snowflake{position:fixed;top:-10px;z-index:9999;user-select:none;cursor:default;animation-name:snowfall;animation-duration:10s;animation-timing-function:linear;animation-iteration-count:infinite;color:#fff;font-size:1em;opacity:.8;}@keyframes snowfall{0%{transform:translateY(0) rotate(0deg)}100%{transform:translateY(100vh) rotate(360deg)}}header{text-align:center;padding:30px 20px;background:rgba(0,0,0,.4);backdrop-filter:blur(10px);box-shadow:0 4px 20px rgba(255,215,0,.3);position:relative;z-index:100;border-bottom:3px solid #ffd700;}header h1{font-size:3em;color:#ffd700;text-shadow:0 0 20px rgba(255,215,0,.8),0 0 40px rgba(255,0,0,.6);animation:glow 2s ease-in-out infinite alternate;margin-bottom:10px;}@keyframes glow{from{text-shadow:0 0 20px rgba(255,215,0,.8),0 0 40px rgba(255,0,0,.6)}to{text-shadow:0 0 30px rgba(255,215,0,1),0 0 60px rgba(255,0,0,.8),0 0 80px rgba(255,255,255,.6)}}header p{font-size:1.2em;color:#ffeb3b;}.container{max-width:1400px;margin:0 auto;padding:40px 20px;}.active-section{background:linear-gradient(135deg,rgba(255,215,0,.2),rgba(255,0,0,.2));border-radius:30px;padding:40px;margin-bottom:50px;box-shadow:0 10px 50px rgba(255,215,0,.5),0 0 100px rgba(255,0,0,.3);border:3px solid #ffd700;animation:pulse 3s ease-in-out infinite;position:relative;overflow:hidden;}@keyframes pulse{0%,100%{box-shadow:0 10px 50px rgba(255,215,0,.5),0 0 100px rgba(255,0,0,.3)}50%{box-shadow:0 15px 60px rgba(255,215,0,.8),0 0 120px rgba(255,0,0,.5)}}.active-section::before{content:'‚≠ê ƒêANG ƒê·∫§U GI√Å ‚≠ê';position:absolute;top:20px;left:50%;transform:translateX(-50%);background:linear-gradient(90deg,#ff0000,#ffd700,#ff0000);padding:10px 30px;border-radius:20px;font-weight:bold;font-size:1.2em;animation:rainbow 3s linear infinite;z-index:10;}@keyframes rainbow{0%{background-position:0 50%}100%{background-position:200% 50%}}.active-product{display:flex;gap:40px;align-items:center;margin-top:60px;flex-wrap:wrap;justify-content:center;}.active-product-image{flex:1;min-width:300px;max-width:500px;}.slideshow-container{position:relative;width:100%;height:400px;border-radius:20px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,.5);border:5px solid #ffd700;}.slideshow-container img{width:100%;height:100%;object-fit:cover;transition:opacity .5s ease-in-out;}.slideshow-prev,.slideshow-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.6);color:#ffd700;border:none;font-size:2em;padding:10px 15px;cursor:pointer;z-index:10;transition:all .3s ease;border-radius:5px;}.slideshow-prev:hover,.slideshow-next:hover{background:rgba(255,215,0,.8);color:#000;}.slideshow-prev{left:10px;}.slideshow-next{right:10px;}.slideshow-dots{position:absolute;bottom:15px;left:50%;transform:translateX(-50%);display:flex;gap:10px;z-index:10;}.dot{width:12px;height:12px;border-radius:50%;background:rgba(255,255,255,.5);cursor:pointer;transition:all .3s ease;border:2px solid rgba(255,215,0,.5);}.dot.active{background:#ffd700;transform:scale(1.3);box-shadow:0 0 10px #ffd700;}.dot:hover{background:#ffeb3b;}.active-product-info{flex:1;min-width:300px;}.active-product-info h2{font-size:2.5em;color:#ffd700;margin-bottom:20px;text-shadow:2px 2px 4px rgba(0,0,0,.5);}.active-product-info p{font-size:1.2em;margin:15px 0;line-height:1.6;}.price-info{background:rgba(255,255,255,.1);padding:20px;border-radius:15px;margin:20px 0;}.price-info .price{font-size:2em;color:#ffeb3b;font-weight:bold;margin:10px 0;}.countdown{background:linear-gradient(135deg,#ff0000,#ff6b6b);padding:20px;border-radius:15px;text-align:center;font-size:2em;font-weight:bold;margin-top:20px;box-shadow:0 5px 20px rgba(255,0,0,.5);}.product-list-section{margin-top:50px;}.product-list-section h2{text-align:center;font-size:2.5em;color:#ffd700;margin-bottom:30px;text-shadow:2px 2px 4px rgba(0,0,0,.5);}.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:30px;}.product-card{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:20px;padding:20px;transition:all .3s ease;border:2px solid rgba(255,215,0,.3);position:relative;overflow:hidden;}.product-card:hover{transform:translateY(-10px);box-shadow:0 15px 40px rgba(255,215,0,.5);border-color:#ffd700;}.product-card.active{border:3px solid #ffd700;background:linear-gradient(135deg,rgba(255,215,0,.3),rgba(255,0,0,.3));animation:activeCard 2s ease-in-out infinite;}@keyframes activeCard{0%,100%{box-shadow:0 0 20px rgba(255,215,0,.5)}50%{box-shadow:0 0 40px rgba(255,215,0,.8)}}.product-card.completed{opacity:.6;background:rgba(100,100,100,.3);}.product-card.completed::before{content:'‚úì ƒê√É K·∫æT TH√öC';position:absolute;top:10px;right:10px;background:#4caf50;padding:5px 10px;border-radius:10px;font-size:.8em;font-weight:bold;z-index:10;}.product-number{position:absolute;top:10px;left:10px;background:linear-gradient(135deg,#ff0000,#ff6b6b);color:white;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:1.2em;box-shadow:0 4px 10px rgba(0,0,0,.3);z-index:10;}.product-image-container{position:relative;width:100%;height:200px;margin:10px 0;border-radius:15px;overflow:hidden;border:2px solid rgba(255,215,0,.5);}.product-image{width:100%;height:100%;object-fit:cover;transition:opacity .5s ease-in-out;}.product-image-dots{position:absolute;bottom:8px;left:50%;transform:translateX(-50%);display:flex;gap:5px;z-index:5;}.product-image-dots .dot{width:8px;height:8px;}.product-card h3{color:#ffd700;font-size:1.3em;margin:15px 0 10px 0;min-height:50px;}.product-card p{margin:8px 0;font-size:.95em;}.product-time{background:rgba(255,215,0,.2);padding:10px;border-radius:10px;text-align:center;margin-top:15px;font-weight:bold;color:#ffeb3b;}.lights{position:fixed;top:0;left:0;width:100%;height:30px;z-index:1000;display:flex;justify-content:space-around;pointer-events:none;}.light{width:20px;height:20px;border-radius:50%;animation:blink 1.5s infinite;}.light:nth-child(1){background:#ff0000;animation-delay:0s}.light:nth-child(2){background:#00ff00;animation-delay:.3s}.light:nth-child(3){background:#0000ff;animation-delay:.6s}.light:nth-child(4){background:#ffff00;animation-delay:.9s}.light:nth-child(5){background:#ff00ff;animation-delay:1.2s}.light:nth-child(6){background:#ff0000;animation-delay:.2s}.light:nth-child(7){background:#00ff00;animation-delay:.5s}.light:nth-child(8){background:#0000ff;animation-delay:.8s}.light:nth-child(9){background:#ffff00;animation-delay:1.1s}.light:nth-child(10){background:#ff00ff;animation-delay:1.4s}@keyframes blink{0%,100%{opacity:1;box-shadow:0 0 20px currentColor}50%{opacity:.3;box-shadow:none}}@media (max-width:768px){header h1{font-size:2em}.active-product{flex-direction:column}.slideshow-container{height:300px}.product-grid{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.countdown{font-size:1.5em}.slideshow-prev,.slideshow-next{font-size:1.5em;padding:8px 12px}}.mystery-product{position:relative;background:linear-gradient(135deg,rgba(138,43,226,.2),rgba(75,0,130,.2))!important;border:2px solid rgba(138,43,226,.5)!important;}.mystery-product:hover{border-color:rgba(138,43,226,.8)!important;box-shadow:0 15px 40px rgba(138,43,226,.5)!important;}.mystery-badge{position:absolute;top:10px;right:10px;background:linear-gradient(135deg,#8a2be2,#4b0082);color:white;padding:8px 15px;border-radius:15px;font-size:.85em;font-weight:bold;z-index:10;box-shadow:0 4px 15px rgba(138,43,226,.6);animation:mysteryPulse 2s ease-in-out infinite;}@keyframes mysteryPulse{0%,100%{box-shadow:0 4px 15px rgba(138,43,226,.6);transform:scale(1)}50%{box-shadow:0 6px 25px rgba(138,43,226,.9);transform:scale(1.05)}}.product-image.blurred{filter:blur(15px);opacity:.7;}.slideshow-container img.blurred{filter:blur(20px);opacity:.6;}.product-image-container:has(.blurred)::after{content:'üîí';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:4em;opacity:.8;text-shadow:0 0 20px rgba(255,255,255,.8);animation:lockFloat 3s ease-in-out infinite;}@keyframes lockFloat{0%,100%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-55%) scale(1.1)}}.slideshow-container:has(img[style*="blur"])::after{content:'üîí B√ç M·∫¨T';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:3em;color:white;text-shadow:0 0 30px rgba(138,43,226,1),0 0 50px rgba(138,43,226,.8);background:rgba(0,0,0,.7);padding:20px 40px;border-radius:20px;border:3px solid #8a2be2;z-index:5;animation:mysteryReveal 2s ease-in-out infinite;}@keyframes mysteryReveal{0%,100%{opacity:.8;transform:translate(-50%,-50%) scale(1)}50%{opacity:1;transform:translate(-50%,-50%) scale(1.05)}}@keyframes revealAnimation{0%{filter:blur(20px);opacity:.3}100%{filter:blur(0);opacity:1}}.product-image.revealing,.slideshow-container img.revealing{animation:revealAnimation 2s ease-out forwards;}.slideshow-container{cursor:zoom-in;overflow:hidden;}.slideshow-container img{transition:transform .5s ease,filter .5s ease;transform-origin:center center;}.slideshow-container:hover img{transform:scale(1.3);}.slideshow-container.zoomed{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:10000;border-radius:0;border:none;cursor:zoom-out;background:rgba(0,0,0,.95);display:flex;align-items:center;justify-content:center;animation:zoomInOverlay .3s ease-out;}@keyframes zoomInOverlay{from{opacity:0}to{opacity:1}}.slideshow-container.zoomed img{transform:scale(1);max-width:90vw;max-height:90vh;width:auto;height:auto;object-fit:contain;box-shadow:0 0 50px rgba(255,215,0,.8);}.zoom-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.95);z-index:9999;display:none;align-items:center;justify-content:center;cursor:zoom-out;animation:fadeIn .3s ease;}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.zoom-overlay.active{display:flex;}.zoom-overlay img{max-width:95vw;max-height:95vh;object-fit:contain;box-shadow:0 0 100px rgba(255,215,0,1);border:5px solid #ffd700;border-radius:10px;animation:zoomInImage .4s cubic-bezier(.68,-.55,.265,1.55);}@keyframes zoomInImage{0%{transform:scale(.5);opacity:0}100%{transform:scale(1);opacity:1}}.zoom-close{position:absolute;top:30px;right:30px;background:linear-gradient(135deg,#ff0000,#ff6b6b);color:white;border:none;width:60px;height:60px;border-radius:50%;font-size:2em;cursor:pointer;z-index:10001;display:flex;align-items:center;justify-content:center;box-shadow:0 5px 20px rgba(255,0,0,.5);transition:all .3s ease;}.zoom-close:hover{transform:rotate(90deg) scale(1.1);background:linear-gradient(135deg,#ff6b6b,#ff0000);box-shadow:0 8px 30px rgba(255,0,0,.8);}.zoom-hint{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#ffd700;padding:15px 30px;border-radius:30px;font-size:1.1em;border:2px solid #ffd700;animation:bounceHint 2s ease-in-out infinite;}@keyframes bounceHint{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-10px)}}.product-image-container{cursor:zoom-in;overflow:hidden;position:relative;}.product-image{transition:transform .4s ease;transform-origin:center center;}.product-image-container:hover .product-image{transform:scale(1.2);}.zoom-indicator{position:absolute;bottom:10px;right:10px;background:rgba(0,0,0,.7);color:#ffd700;padding:8px 12px;border-radius:20px;font-size:1.2em;pointer-events:none;opacity:0;transition:opacity .3s ease;z-index:5;border:2px solid #ffd700;}.product-image-container:hover .zoom-indicator,.slideshow-container:hover .zoom-indicator{opacity:1;}.slideshow-container .zoom-indicator{position:absolute;bottom:60px;right:20px;font-size:1.5em;padding:10px 15px;}.product-image.blurred{cursor:not-allowed!important;}.product-image-container:has(.blurred){cursor:not-allowed!important;}.product-image-container:has(.blurred):hover .product-image{transform:scale(1)!important;}.slideshow-container:has(img[style*="blur"]){cursor:not-allowed!important;}.slideshow-container:has(img[style*="blur"]):hover img{transform:scale(1)!important;}@media (hover:none){.product-image-container:active .product-image{transform:scale(1.2)}.slideshow-container:active img{transform:scale(1.3)}}@media (max-width:768px){.zoom-overlay img{max-width:98vw;max-height:98vh}.zoom-close{width:50px;height:50px;font-size:1.5em;top:20px;right:20px}.zoom-hint{font-size:.9em;padding:10px 20px;bottom:20px}.slideshow-container:hover img{transform:scale(1.15)}.product-image-container:hover .product-image{transform:scale(1.15)}}body.zoom-active{overflow:hidden;}.zoom-overlay img{image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges;}.zoom-overlay.fullscreen{cursor:grab;}.zoom-overlay.fullscreen:active{cursor:grabbing;}.slideshow-container.zoomed .slideshow-prev,.slideshow-container.zoomed .slideshow-next,.slideshow-container.zoomed .slideshow-dots{display:none;}@keyframes zoomPulse{0%,100%{box-shadow:0 0 0 0 rgba(255,215,0,.7)}50%{box-shadow:0 0 0 20px rgba(255,215,0,0)}}.zoom-indicator{animation:zoomPulse 2s ease-in-out infinite;}
// script.js
// Bi·∫øn to√†n c·ª•c
let products = [];
let currentActiveImageIndex = 0;
let activeImageInterval = null;
let productImageIntervals = {};

// Th·ªùi gian b·∫Øt ƒë·∫ßu: 2h chi·ªÅu h√¥m nay
const startTime = new Date();
startTime.setHours(14, 0, 0, 0); // 2:00 PM

// M·ªói s·∫£n ph·∫©m ƒë·∫•u gi√° 10 ph√∫t
const AUCTION_DURATION = 10 * 60 * 1000;

// T·∫£i d·ªØ li·ªáu t·ª´ JSON file
async function loadProducts() {
    try {
        const response = await fetch('products.json');
        products = await response.json();
        init();
    } catch (error) {
        console.error('L·ªói khi t·∫£i d·ªØ li·ªáu s·∫£n ph·∫©m:', error);
        alert('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu s·∫£n ph·∫©m. Vui l√≤ng ki·ªÉm tra file products.json');
    }
}

// T·∫°o hi·ªáu ·ª©ng tuy·∫øt r∆°i
function createSnowflakes() {
    const snowflakeChars = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚úª', '‚úº'];
    for (let i = 0; i < 50; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.animationDuration = (Math.random() * 3 + 7) + 's';
        snowflake.style.animationDelay = Math.random() * 5 + 's';
        snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
        document.body.appendChild(snowflake);
    }
}

// T√≠nh to√°n s·∫£n ph·∫©m hi·ªán t·∫°i ƒëang ƒë·∫•u gi√°
function getCurrentProductIndex() {
    const now = new Date();
    const diff = now - startTime;
    
    if (diff < 0) {
        return -1; // Ch∆∞a b·∫Øt ƒë·∫ßu
    }
    
    const index = Math.floor(diff / AUCTION_DURATION);
    return index < products.length ? index : products.length; // ƒê√£ k·∫øt th√∫c
}

// Ki·ªÉm tra xem c√≥ n√™n hi·ªÉn th·ªã th√¥ng tin th·∫≠t hay kh√¥ng
function shouldRevealProduct(productIndex) {
    const currentIndex = getCurrentProductIndex();
    // Ch·ªâ reveal khi s·∫£n ph·∫©m ƒëang active ho·∫∑c ƒë√£ qua
    return currentIndex >= productIndex;
}

// L·∫•y th√¥ng tin hi·ªÉn th·ªã c·ªßa s·∫£n ph·∫©m (th·∫≠t ho·∫∑c ·∫©n)
function getDisplayProduct(product, productIndex) {
    if (product.hidden && !shouldRevealProduct(productIndex)) {
        return {
            name: product.hiddenName || "üé≠ S·∫£n Ph·∫©m B√≠ M·∫≠t",
            description: product.hiddenDescription || "Th√¥ng tin s·∫Ω ƒë∆∞·ª£c c√¥ng b·ªë khi b·∫Øt ƒë·∫ßu ƒë·∫•u gi√°",
            images: [product.hiddenImage || "images/mystery-box.jpg"],
            startPrice: product.startPrice,
            originalPrice: product.originalPrice,
            isHidden: true
        };
    }
    return {
        name: product.name,
        description: product.description,
        images: product.images,
        startPrice: product.startPrice,
        originalPrice: product.originalPrice,
        isHidden: false
    };
}

// Slideshow cho s·∫£n ph·∫©m ƒëang ƒë·∫•u gi√°
function showActiveImage(index) {
    const currentIndex = getCurrentProductIndex();
    if (currentIndex < 0 || currentIndex >= products.length) return;
    
    const product = products[currentIndex];
    const displayProduct = getDisplayProduct(product, currentIndex);
    const images = displayProduct.images;
    
    currentActiveImageIndex = index;
    const imgElement = document.getElementById('activeImage');
    imgElement.src = images[currentActiveImageIndex];
    
    // Th√™m hi·ªáu ·ª©ng blur n·∫øu ƒëang ·∫©n
    if (displayProduct.isHidden) {
        imgElement.style.filter = 'blur(20px)';
    } else {
        imgElement.style.filter = 'none';
    }
    
    // C·∫≠p nh·∫≠t dots
    updateActiveDots(images.length);
}

function updateActiveDots(totalImages) {
    const dotsContainer = document.getElementById('activeDots');
    dotsContainer.innerHTML = '';
    
    for (let i = 0; i < totalImages; i++) {
        const dot = document.createElement('span');
        dot.className = `dot ${i === currentActiveImageIndex ? 'active' : ''}`;
        dot.onclick = () => showActiveImage(i);
        dotsContainer.appendChild(dot);
    }
}

function nextActiveImage() {
    const currentIndex = getCurrentProductIndex();
    if (currentIndex < 0 || currentIndex >= products.length) return;
    
    const product = products[currentIndex];
    const displayProduct = getDisplayProduct(product, currentIndex);
    const images = displayProduct.images;
    
    currentActiveImageIndex = (currentActiveImageIndex + 1) % images.length;
    showActiveImage(currentActiveImageIndex);
}

function prevActiveImage() {
    const currentIndex = getCurrentProductIndex();
    if (currentIndex < 0 || currentIndex >= products.length) return;
    
    const product = products[currentIndex];
    const displayProduct = getDisplayProduct(product, currentIndex);
    const images = displayProduct.images;
    
    currentActiveImageIndex = (currentActiveImageIndex - 1 + images.length) % images.length;
    showActiveImage(currentActiveImageIndex);
}

function startActiveImageSlideshow() {
    // D·ª´ng slideshow c≈© n·∫øu c√≥
    if (activeImageInterval) {
        clearInterval(activeImageInterval);
    }
    
    const currentIndex = getCurrentProductIndex();
    if (currentIndex < 0 || currentIndex >= products.length) return;
    
    const product = products[currentIndex];
    const displayProduct = getDisplayProduct(product, currentIndex);
    const images = displayProduct.images;
    
    if (images.length > 1) {
        // T·ª± ƒë·ªông chuy·ªÉn ·∫£nh m·ªói 3 gi√¢y
        activeImageInterval = setInterval(nextActiveImage, 3000);
    }
}

// C·∫≠p nh·∫≠t th√¥ng tin s·∫£n ph·∫©m ƒëang ƒë·∫•u gi√°
function updateActiveProduct() {
    const currentIndex = getCurrentProductIndex();
    
    if (currentIndex === -1) {
        const firstProduct = products[0];
        const displayProduct = getDisplayProduct(firstProduct, 0);
        
        document.getElementById('activeName').textContent = 'S·∫Øp b·∫Øt ƒë·∫ßu...';
        document.getElementById('activeDescription').textContent = 'ƒê·∫•u gi√° s·∫Ω b·∫Øt ƒë·∫ßu l√∫c 14:00 h√¥m nay';
        document.getElementById('activeStartPrice').textContent = '0 VNƒê';
        document.getElementById('activeOriginalPrice').textContent = '0 VNƒê';
        document.getElementById('activeImage').src = displayProduct.images[0];
        document.getElementById('activeDots').innerHTML = '';
        return;
    }
    
    if (currentIndex >= products.length) {
        document.getElementById('activeName').textContent = 'ƒê√£ k·∫øt th√∫c';
        document.getElementById('activeDescription').textContent = 'T·∫•t c·∫£ s·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c ƒë·∫•u gi√°!';
        document.getElementById('activeStartPrice').textContent = '0 VNƒê';
        document.getElementById('activeOriginalPrice').textContent = '0 VNƒê';
        document.getElementById('activeDots').innerHTML = '';
        if (activeImageInterval) clearInterval(activeImageInterval);
        return;
    }
    
    const product = products[currentIndex];
    const displayProduct = getDisplayProduct(product, currentIndex);
    
    document.getElementById('activeName').textContent = displayProduct.name;
    document.getElementById('activeDescription').textContent = displayProduct.description;
    document.getElementById('activeStartPrice').textContent = displayProduct.startPrice + ' VNƒê';
    document.getElementById('activeOriginalPrice').textContent = displayProduct.originalPrice + ' VNƒê';
    
    // Reset slideshow
    currentActiveImageIndex = 0;
    showActiveImage(0);
    startActiveImageSlideshow();
}

// C·∫≠p nh·∫≠t countdown
function updateCountdown() {
    const currentIndex = getCurrentProductIndex();
    const countdownEl = document.getElementById('countdown');
    
    if (currentIndex === -1) {
        const now = new Date();
        const diff = startTime - now;
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        countdownEl.textContent = `‚è∞ B·∫Øt ƒë·∫ßu sau: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        return;
    }
    
    if (currentIndex >= products.length) {
        countdownEl.textContent = 'üéâ ƒê√£ k·∫øt th√∫c t·∫•t c·∫£ ƒë·∫•u gi√°!';
        return;
    }
    
    const now = new Date();
    const productStartTime = new Date(startTime.getTime() + currentIndex * AUCTION_DURATION);
    const productEndTime = new Date(productStartTime.getTime() + AUCTION_DURATION);
    const diff = productEndTime - now;
    
    if (diff <= 0) {
        countdownEl.textContent = '‚è∞ Th·ªùi gian c√≤n l·∫°i: 00:00';
        return;
    }
    
    const minutes = Math.floor(diff / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    countdownEl.textContent = `‚è∞ Th·ªùi gian c√≤n l·∫°i: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

// Slideshow cho product card
function createProductSlideshow(productId, images, isHidden) {
    let currentIndex = 0;
    
    const interval = setInterval(() => {
        currentIndex = (currentIndex + 1) % images.length;
        const imgElement = document.getElementById(`product-img-${productId}`);
        const dotsContainer = document.getElementById(`product-dots-${productId}`);
        
        if (imgElement && dotsContainer) {
            imgElement.src = images[currentIndex];
            
            // C·∫≠p nh·∫≠t dots
            const dots = dotsContainer.querySelectorAll('.dot');
            dots.forEach((dot, idx) => {
                dot.classList.toggle('active', idx === currentIndex);
            });
        } else {
            // D·ª´ng interval n·∫øu element kh√¥ng c√≤n t·ªìn t·∫°i
            clearInterval(interval);
            delete productImageIntervals[productId];
        }
    }, 4000); // Chuy·ªÉn ·∫£nh m·ªói 4 gi√¢y
    
    productImageIntervals[productId] = interval;
}

 // Render danh s√°ch s·∫£n ph·∫©m
function renderProductList() {
    const grid = document.getElementById('productGrid');
    const currentIndex = getCurrentProductIndex();
    
    grid.innerHTML = '';
    
    // D·ª´ng t·∫•t c·∫£ intervals c≈©
    Object.values(productImageIntervals).forEach(interval => clearInterval(interval));
    productImageIntervals = {};
    
    products.forEach((product, index) => {
        const productStartTime = new Date(startTime.getTime() + index * AUCTION_DURATION);
        const productEndTime = new Date(productStartTime.getTime() + AUCTION_DURATION);
        
        const hours = productStartTime.getHours().toString().padStart(2, '0');
        const minutes = productStartTime.getMinutes().toString().padStart(2, '0');
        const endHours = productEndTime.getHours().toString().padStart(2, '0');
        const endMinutes = productEndTime.getMinutes().toString().padStart(2, '0');
        
        let statusClass = '';
        let statusText = `${hours}:${minutes} - ${endHours}:${endMinutes}`;
        
        if (index < currentIndex) {
            statusClass = 'completed';
        } else if (index === currentIndex) {
            statusClass = 'active';
            statusText = 'üî¥ ƒêANG ƒê·∫§U GI√Å';
        }
        
        // L·∫•y th√¥ng tin hi·ªÉn th·ªã (th·∫≠t ho·∫∑c ·∫©n)
        const displayProduct = getDisplayProduct(product, index);
        const images = displayProduct.images;
        const firstImage = images[0];
        
        const card = document.createElement('div');
        card.className = `product-card ${statusClass} ${displayProduct.isHidden ? 'mystery-product' : ''}`;
        
        // T·∫°o dots cho slideshow
        let dotsHTML = '';
        if (images.length > 1) {
            dotsHTML = `<div class="product-image-dots" id="product-dots-${product.id}">`;
            images.forEach((_, idx) => {
                dotsHTML += `<span class="dot ${idx === 0 ? 'active' : ''}"></span>`;
            });
            dotsHTML += '</div>';
        }
        
        // Th√™m badge "B√ç M·∫¨T" n·∫øu ƒëang ·∫©n
        const mysteryBadge = displayProduct.isHidden ? 
            '<div class="mystery-badge">üé≠ B√ç M·∫¨T</div>' : '';
        
        card.innerHTML = `
            <div class="product-number">${index + 1}</div>
            ${mysteryBadge}
            <div class="product-image-container">
                <img class="product-image ${displayProduct.isHidden ? 'blurred' : ''}" 
                     id="product-img-${product.id}" 
                     src="${firstImage}" 
                     alt="${displayProduct.name}">
                ${dotsHTML}
            </div>
            <h3>${displayProduct.name}</h3>
            <p><strong>Gi√° kh·ªüi ƒëi·ªÉm:</strong> ${displayProduct.startPrice} VNƒê</p>
            <p><strong>Gi√° g·ªëc:</strong> ${displayProduct.originalPrice} VNƒê</p>
            <p style="font-size: 0.9em; color: #ccc;">${displayProduct.description}</p>
            <div class="product-time">${statusText}</div>
        `;
        
        grid.appendChild(card);
        
        // B·∫Øt ƒë·∫ßu slideshow n·∫øu c√≥ nhi·ªÅu ·∫£nh
        if (images.length > 1) {
            createProductSlideshow(product.id, images, displayProduct.isHidden);
        }
    });
    
    // Th√™m zoom cho c√°c product cards m·ªõi
    setTimeout(() => {
        addProductCardZoom();
    }, 100);
}


// Kh·ªüi t·∫°o
function init() {
    createSnowflakes();
    updateActiveProduct();
    updateCountdown();
    renderProductList();
    
    // Kh·ªüi t·∫°o zoom features
    initZoomFeatures();
    
    // Event listeners cho n√∫t prev/next
    document.getElementById('activePrev').addEventListener('click', prevActiveImage);
    document.getElementById('activeNext').addEventListener('click', nextActiveImage);
    
    // C·∫≠p nh·∫≠t m·ªói gi√¢y
    let lastProductIndex = getCurrentProductIndex();
    
    setInterval(() => {
        updateCountdown();
        const currentIndex = getCurrentProductIndex();
        
        // N·∫øu chuy·ªÉn sang s·∫£n ph·∫©m m·ªõi
        if (lastProductIndex !== currentIndex) {
            lastProductIndex = currentIndex;
            updateActiveProduct();
            renderProductList();
            // Re-add zoom indicators after render
            setTimeout(() => {
                addZoomIndicators();
            }, 100);
        }
    }, 1000);
}



// ============================================
// ZOOM IMAGE FUNCTIONALITY
// ============================================

let zoomOverlay = null;
let isZoomed = false;

// T·∫°o zoom overlay
function createZoomOverlay() {
    if (zoomOverlay) return;
    
    zoomOverlay = document.createElement('div');
    zoomOverlay.className = 'zoom-overlay';
    zoomOverlay.innerHTML = `
        <button class="zoom-close" aria-label="ƒê√≥ng">√ó</button>
        <div class="zoom-hint">üñ±Ô∏è Click ƒë·ªÉ ƒë√≥ng | ESC ƒë·ªÉ tho√°t</div>
        <img src="" alt="Zoomed image">
    `;
    
    document.body.appendChild(zoomOverlay);
    
    // Close handlers
    zoomOverlay.addEventListener('click', closeZoom);
    const closeBtn = zoomOverlay.querySelector('.zoom-close');
    closeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        closeZoom();
    });
    
    // Prevent image click from closing
    const img = zoomOverlay.querySelector('img');
    img.addEventListener('click', (e) => {
        e.stopPropagation();
    });
    
    // ESC key to close
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && isZoomed) {
            closeZoom();
        }
    });
}

// Open zoom view
function openZoom(imageSrc, isBlurred = false) {
    if (isBlurred) return; // Don't zoom blurred images
    
    createZoomOverlay();
    
    const img = zoomOverlay.querySelector('img');
    img.src = imageSrc;
    
    zoomOverlay.classList.add('active');
    document.body.classList.add('zoom-active');
    isZoomed = true;
}

// Close zoom view
function closeZoom() {
    if (!zoomOverlay) return;
    
    zoomOverlay.classList.remove('active');
    document.body.classList.remove('zoom-active');
    isZoomed = false;
}

// Add zoom indicators to images
function addZoomIndicators() {
    // Add to active product slideshow
    const activeContainer = document.querySelector('.slideshow-container');
    if (activeContainer && !activeContainer.querySelector('.zoom-indicator')) {
        const indicator = document.createElement('div');
        indicator.className = 'zoom-indicator';
        indicator.innerHTML = 'üîç Click ƒë·ªÉ ph√≥ng to';
        activeContainer.appendChild(indicator);
        
        // Add click handler for active image
        const activeImg = activeContainer.querySelector('img');
        activeContainer.addEventListener('click', (e) => {
            // Don't zoom if clicking on prev/next buttons
            if (e.target.closest('.slideshow-prev') || e.target.closest('.slideshow-next') || e.target.closest('.slideshow-dots')) {
                return;
            }
            
            const isBlurred = activeImg.style.filter && activeImg.style.filter.includes('blur');
            if (!isBlurred) {
                openZoom(activeImg.src);
            }
        });
    }
}

// Add zoom to product cards
function addProductCardZoom() {
    const productCards = document.querySelectorAll('.product-image-container');
    
    productCards.forEach(container => {
        // Remove old indicator if exists
        const oldIndicator = container.querySelector('.zoom-indicator');
        if (oldIndicator) oldIndicator.remove();
        
        // Add new indicator
        const indicator = document.createElement('div');
        indicator.className = 'zoom-indicator';
        indicator.innerHTML = 'üîç';
        container.appendChild(indicator);
        
        // Remove old listeners by cloning
        const newContainer = container.cloneNode(true);
        container.parentNode.replaceChild(newContainer, container);
        
        // Add click handler
        const img = newContainer.querySelector('.product-image');
        newContainer.addEventListener('click', () => {
            const isBlurred = img.classList.contains('blurred');
            if (!isBlurred) {
                openZoom(img.src);
            }
        });
    });
}

// Mouse wheel zoom for zoomed image (bonus feature)
function addWheelZoom() {
    if (!zoomOverlay) return;
    
    const img = zoomOverlay.querySelector('img');
    let scale = 1;
    
    zoomOverlay.addEventListener('wheel', (e) => {
        if (!isZoomed) return;
        
        e.preventDefault();
        
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale += delta;
        scale = Math.min(Math.max(0.5, scale), 3); // Limit between 0.5x and 3x
        
        img.style.transform = `scale(${scale})`;
    });
}

// Drag to pan when zoomed (bonus feature)
function addDragToPan() {
    if (!zoomOverlay) return;
    
    const img = zoomOverlay.querySelector('img');
    let isDragging = false;
    let startX, startY, translateX = 0, translateY = 0;
    
    img.addEventListener('mousedown', (e) => {
        if (!isZoomed) return;
        isDragging = true;
        startX = e.clientX - translateX;
        startY = e.clientY - translateY;
        img.style.cursor = 'grabbing';
        e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        translateX = e.clientX - startX;
        translateY = e.clientY - startY;
        img.style.transform = `translate(${translateX}px, ${translateY}px) scale(${img.style.transform.match(/scale\((.*?)\)/)?.[1] || 1})`;
    });
    
    document.addEventListener('mouseup', () => {
        isDragging = false;
        if (img) img.style.cursor = 'grab';
    });
}

// Kh·ªüi t·∫°o zoom functionality
function initZoomFeatures() {
    createZoomOverlay();
    addZoomIndicators();
    addWheelZoom();
    addDragToPan();
}


// Ch·∫°y khi trang load xong
window.addEventListener('load', loadProducts);
// products.json
[
  {
    "id": 17,
    "name": "Combo b·ªô s√°ch UX Research, UX Content",
    "description": "Trong th·ªùi ƒë·∫°i c√¥ng ngh·ªá, ƒë·∫∑c bi·ªát AI ƒëang ph√°t tri·ªÉn nh∆∞ hi·ªán nay, vi·ªác th·∫•u hi·ªÉu h√†nh vi ng∆∞·ªùi d√πng tr√™n c√°c s√†n TMDT, c√°c ·ª©ng d·ª•ng web l√† 1 ƒëi·ªÅu r·∫•t quan tr·ªçng v√† c·∫ßn thi·∫øt. Nhi·ªÅu l√∫c ch·ªâ c·∫ßn 1 thay ƒë·ªïi nh·ªè c≈©ng t·∫°o ra nh·ªØng t√°c ƒë·ªông ko th·ªÉ l∆∞·ªùng tr∆∞·ªõc. T·∫•t c·∫£ ƒë·ªÅu n·∫±m trong b·ªô s√°ch n√†y. ",
    "startPrice": "100,000",
    "originalPrice": "280,000",
    "images": ["./images/sp17.jpg"]
  },
  {
    "id": 11,
    "name": "S√∫ng Gosei Blaster",
    "description": "H√†ng Bandai Nh·∫≠t B·∫£n ch√≠nh h√£ng, c√≥ √¢m thanh, ƒë·∫ßu s√∫ng l√† c√°c lo·∫°i linh th√∫ kh√°c nhau, m·ªói linh th√∫ khi l·∫Øp cho ra 1 √¢m thanh kh√°c nhau. Khi b·∫Øn ra c√°c v√¨ tinh t√∫, d√πng v√†o bu·ªïi ƒë√™m sƒÉn ƒëom ƒë√≥m.",
    "startPrice": "50,000",
    "originalPrice": "350,000",
    "images": ["./images/sp11.jpg", "./images/sp11-2.jpg"]
  },
  {
    "id": 6,
    "name": "üíÉ B·ªØa ƒÉn t·ªëi c√πng b·∫°n Thu·ª∑ b√™n team RO (K√©o d√†i t·ªõi 18h)",
    "description": "Chi ti·∫øt: Xinh ƒë·∫πp, vui v·∫ª, ƒë·ªôc th√¢n. L·ªùi t·ª´ b·∫°n Thu·ª∑:'M√¨nh r·∫•t mong ƒë∆∞·ª£c g·∫∑p g·ª° v√† tr√≤ chuy·ªán c√πng c√°c b·∫°n trong m·ªôt bu·ªïi t·ªëi ·∫•m c√∫ng v√† vui v·∫ª. H√£y c√πng nhau t·∫°o n√™n nh·ªØng k·ª∑ ni·ªám ƒë√°ng nh·ªõ nh√©!'",
    "startPrice": "144ƒë (gi√° kh·ªüi ƒëi·ªÉm t∆∞·ª£ng tr∆∞ng)",
    "originalPrice": "Kh√¥ng c√≥ s·∫µn",
    "images": ["./images/thuy.jpeg"],
    "hidden": true,
    "hiddenName": "üé≠ B·ªØa t·ªëi B√≠ M·∫≠t #2",
    "hiddenDescription": "M·ªôt tr·∫£i nghi·ªám ƒë·∫∑c bi·ªát s·∫Ω ƒë∆∞·ª£c c√¥ng b·ªë khi b·∫Øt ƒë·∫ßu ƒë·∫•u gi√°",
    "hiddenImage": "./images/mystery-box2.jpg"
  },
  {
    "id": 10,
    "name": "ƒê·ªì trang tr√≠ ƒë·ªÉ b√†n",
    "description": "Set m·ªπ ph·∫©m d∆∞·ª°ng da 5 m√≥n t·ª´ th·∫£o m·ªôc thi√™n nhi√™n",
    "startPrice": "60,000",
    "originalPrice": "250,000",
    "images": ["./images/sp10.jpeg"]
  },
  {
    "id": 1,
    "name": "Balo MSI Essential",
    "description": "Balo MSI Essential h√†ng m·ªõi.",
    "startPrice": "200,000",
    "originalPrice": "490,000",
    "images": ["./images/balo.jpeg"]
  },
  {
    "id": 12,
    "name": "M√°y √âp Ch·∫≠m Sunhouse",
    "description": "M√£ SUNHOUSE SHD5512, M√°y m·ªõi 100% ch∆∞a qua s·ª≠ d·ª•ng (tuy nhi√™n v·ª´a h·∫øt b·∫£o h√†nh 1 nƒÉm)",
    "startPrice": "390,000",
    "originalPrice": "1,200,000",
    "images": ["./images/sp12.jpg"]
  },
  {
    "id": 13,
    "name": "G·∫•u b√¥ng Shark bee",
    "description": "G·∫•u b√¥ng nh·ªè xinh vs thi·∫øt k·∫ø ƒë·ªôc ƒë√°o, k·∫øt h·ª£p gi·ªØa con c√° m·∫≠p v√† ong. Ph√π h·ª£p ƒë·ªÉ c·∫ßm n·∫Øm v√† n√©m v√†o m·∫∑t ƒë·ª©a n√†o b·∫°n kh√¥ng ∆∞a.",
    "startPrice": "50,000",
    "originalPrice": "145,000",
    "images": ["./images/sp13.jpeg"]
  },
  {
    "id": 14,
    "name": "T√∫i x√°ch n√¢u gi·∫£ da",
    "description": "T√∫i x√°ch n·ªØ style vintage, ph√π h·ª£p vs nh·ªØng outfit thu ƒë√¥ng",
    "startPrice": "45,000",
    "originalPrice": "Kh√¥ng c√≥ s·∫µn",
    "images": ["./images/sp14.jpeg"]
  },
  {
    "id": 15,
    "name": "C·ªëc Blueberry",
    "description": "C·ªëc u·ªëng n∆∞·ªõc k√®m ·ªëng h√∫t thu·ª∑ tinh trang tr√≠ theo style qu·∫£ vi·ªát qu·∫•t ƒë√°ng y√™u, ph√π h·ª£p ƒë·ªÉ s·ª≠ d·ª•ng v√† decor.",
    "startPrice": "30,000",
    "originalPrice": "Kh√¥ng c√≥ s·∫µn",
    "images": ["./images/sp15.jpeg"]
  },
  {
    "id": 18,
    "name": "D√¢y chuy·ªÅn b·∫°c 925",
    "description": "D√¢y chuy·ªÅn n·ªØ b·∫°c blink blink t·∫°o ƒëi·ªÉm nh·∫•n cho outfit",
    "startPrice": "70,000",
    "originalPrice": "Kh√¥ng c√≥ s·∫µn",
    "images": [
      "./images/sp18.jpeg",
      "./images/sp18-2.jpeg",
      "./images/sp18-3.jpeg"
    ]
  },

  {
    "id": 19,
    "name": "Nh√† b√∫p b√™ DIY + ƒë·∫ßy ƒë·ªß d·ª•ng c·ª•",
    "description": "Nh√† b√∫p b√™ c·ªï trang DIY vs ƒë·∫ßy ƒë·ªß d·ª•ng c·ª• ph√π h·ª£p v·ªõi nh·ªØng ng∆∞·ªùi ƒëam m√™ ƒë·ªì handmade v√† mong mu·ªën ƒëc t·ª± tay x√¢y d·ª±ng nh·ªØng m√¥ h√¨nh nh·ªè xinh. Ph√π h·ª£p ƒë·ªÉ bonding c√πng con tr·∫ª ƒë·ªÉ d·∫°y v·ªÅ t√≠nh ki√™n nh·∫´n, kh·∫£ nƒÉng quan s√°t v√† s·ª± c·∫©n th·∫≠n.",
    "startPrice": "400,000",
    "originalPrice": "Kh√¥ng c√≥ s·∫µn",
    "images": ["./images/sp19.jpeg"]
  }
]
